---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Hero from '../../components/Hero.astro';
import Card from '../../components/Card.astro';
import { getCollection } from 'astro:content';
import { useTranslations, getRouteForLang } from '../../i18n/index';

const t = useTranslations('en');
const projects = (await getCollection('projects', e => e.id.startsWith('en/'))).slice(0, 3);
const articles = (await getCollection('articles', e => e.id.startsWith('en/'))).slice(0, 3);
---
<BaseLayout title="Sérgio Carvalho - Data Scientist & Statistician" description="Portfolio of Sérgio Carvalho, Data Scientist and Statistician">
  <Hero />
  <div class="max-w-6xl mx-auto px-4 py-12">
    <section class="mb-16">
      <div class="flex items-center justify-between mb-8">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-white">{t('sections.featuredProjects')}</h2>
        <a href={getRouteForLang('en', 'projects')} class="text-navy-600 dark:text-navy-400 hover:underline text-sm">{t('sections.viewAllProjects')}</a>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        {projects.map(p => (
          <Card title={p.data.title} description={p.data.description} href={`/en/projects/${p.slug.replace('en/', '')}`} tags={p.data.tags} date={p.data.date} type="project" />
        ))}
      </div>
    </section>
    <section>
      <div class="flex items-center justify-between mb-8">
        <h2 class="text-2xl font-bold text-slate-900 dark:text-white">{t('sections.recentArticles')}</h2>
        <a href={getRouteForLang('en', 'articles')} class="text-navy-600 dark:text-navy-400 hover:underline text-sm">{t('sections.viewAllArticles')}</a>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        {articles.map(a => (
          <Card title={a.data.title} description={a.data.description} href={`/en/articles/${a.slug.replace('en/', '')}`} tags={a.data.tags} date={a.data.date} type="article" />
        ))}
      </div>
    </section>
  </div>
</BaseLayout>
